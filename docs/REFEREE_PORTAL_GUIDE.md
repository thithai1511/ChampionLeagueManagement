# HÆ°á»›ng Dáº«n Referee Portal - Há»‡ Thá»‘ng Trá»ng TÃ i

## ğŸ“‹ Tá»•ng Quan

Referee Portal lÃ  há»‡ thá»‘ng dÃ nh riÃªng cho trá»ng tÃ i vÃ  trá»£ lÃ½ Ä‘á»ƒ quáº£n lÃ½, Ä‘iá»u khiá»ƒn vÃ  bÃ¡o cÃ¡o cÃ¡c tráº­n Ä‘áº¥u Ä‘Æ°á»£c phÃ¢n cÃ´ng.

## ğŸ¯ TÃ­nh NÄƒng ChÃ­nh

### 1ï¸âƒ£ **Quáº£n LÃ½ Lá»‹ch Tráº­n Äáº¥u**
- Xem danh sÃ¡ch táº¥t cáº£ tráº­n Ä‘áº¥u Ä‘Æ°á»£c phÃ¢n cÃ´ng
- Lá»c theo: Sáº¯p tá»›i, HÃ´m nay, ÄÃ£ qua, Táº¥t cáº£
- Hiá»ƒn thá»‹ thÃ´ng tin Ä‘áº§y Ä‘á»§:
  - TÃªn 2 Ä‘á»™i
  - NgÃ y giá» thi Ä‘áº¥u
  - Äá»‹a Ä‘iá»ƒm (sÃ¢n váº­n Ä‘á»™ng)
  - Vai trÃ² (Trá»ng tÃ i chÃ­nh / Trá»£ lÃ½)
  - Tráº¡ng thÃ¡i tráº­n Ä‘áº¥u

### 2ï¸âƒ£ **Äiá»u Khiá»ƒn Tráº­n Äáº¥u (Match Control)**
Trá»ng tÃ i cÃ³ toÃ n quyá»n quáº£n lÃ½ diá»…n biáº¿n tráº­n Ä‘áº¥u:

#### âš½ Ghi Nháº­n Sá»± Kiá»‡n
- **BÃ n tháº¯ng (Goal)**: Ghi nháº­n cáº§u thá»§ ghi bÃ n
- **Tháº» vÃ ng (Yellow Card)**: Cáº£nh cÃ¡o cáº§u thá»§
- **Tháº» Ä‘á» (Red Card)**: Truáº¥t quyá»n thi Ä‘áº¥u
- **Thay ngÆ°á»i (Substitution)**: Ghi nháº­n cáº§u thá»§ vÃ o/ra sÃ¢n

#### ğŸ“Š Timeline Diá»…n Biáº¿n
- Hiá»ƒn thá»‹ thá»i gian real-time cá»§a tráº­n Ä‘áº¥u
- Timeline táº¥t cáº£ sá»± kiá»‡n theo thá»© tá»± thá»i gian
- CÃ³ thá»ƒ xÃ³a sá»± kiá»‡n náº¿u nháº§m láº«n

#### ğŸ›ï¸ Quáº£n LÃ½ Match Time
- Tá»± Ä‘á»™ng tÃ­nh thá»i gian tá»« lÃºc báº¯t Ä‘áº§u
- CÃ³ thá»ƒ Ä‘iá»u chá»‰nh thá»§ cÃ´ng náº¿u cáº§n
- Hiá»ƒn thá»‹ rÃµ rÃ ng trÃªn scoreboard

### 3ï¸âƒ£ **Xem Äá»™i HÃ¬nh (Lineups)**
- Hiá»ƒn thá»‹ Ä‘á»™i hÃ¬nh 2 Ä‘á»™i vá»›i giao diá»‡n chuyÃªn nghiá»‡p
- SÃ¢n bÃ³ng gradient xanh vá»›i váº¡ch sÃ¢n chuáº©n
- Player badges Ä‘áº§y Ä‘á»§ thÃ´ng tin:
  - Sá»‘ Ã¡o, tÃªn cáº§u thá»§, vá»‹ trÃ­
  - Tráº¡ng thÃ¡i (tháº» vÃ ng/Ä‘á», ghi bÃ n)
- Há»— trá»£ nhiá»u formation (4-4-2, 4-3-3, 4-2-3-1, v.v.)
- Hiá»ƒn thá»‹ cáº§u thá»§ dá»± bá»‹

### 4ï¸âƒ£ **Ná»™p BÃ¡o CÃ¡o (Match Report)**
Sau tráº­n Ä‘áº¥u, trá»ng tÃ i pháº£i ná»™p bÃ¡o cÃ¡o gá»“m:
- **Thá»i tiáº¿t**: Äiá»u kiá»‡n thá»i tiáº¿t khi thi Ä‘áº¥u
- **Sá»‘ khÃ¡n giáº£**: Æ¯á»›c tÃ­nh sá»‘ lÆ°á»£ng khÃ¡n giáº£
- **Ghi chÃº chung**: Nháº­n xÃ©t vá» tráº­n Ä‘áº¥u
- **Sá»± cá»‘**: Ghi nháº­n tranh cÃ£i, cháº¥n thÆ°Æ¡ng, sá»± cá»‘ Ä‘áº·c biá»‡t

### 5ï¸âƒ£ **Lá»‹ch Sá»­ BÃ¡o CÃ¡o**
- Xem láº¡i táº¥t cáº£ bÃ¡o cÃ¡o Ä‘Ã£ ná»™p
- Theo dÃµi tráº¡ng thÃ¡i: ÄÃ£ ná»™p / ChÆ°a ná»™p
- TÃ¬m kiáº¿m theo ngÃ y, Ä‘á»™i

## ğŸš€ CÃ¡ch Sá»­ Dá»¥ng

### ÄÄƒng Nháº­p
```
URL: http://localhost:3000/admin/login
- Username: TÃ i khoáº£n trá»ng tÃ i
- Password: Máº­t kháº©u
```
Sau khi Ä‘Äƒng nháº­p, há»‡ thá»‘ng tá»± Ä‘á»™ng chuyá»ƒn Ä‘áº¿n `/referee/my-matches`

### Quy TrÃ¬nh LÃ m Viá»‡c Chuáº©n

#### **TrÆ°á»›c Tráº­n Äáº¥u**
1. ÄÄƒng nháº­p vÃ o Referee Portal
2. VÃ o **"Lá»‹ch Trá»ng TÃ i"**
3. Kiá»ƒm tra tráº­n Ä‘áº¥u Ä‘Æ°á»£c phÃ¢n cÃ´ng
4. Click **"Quáº£n lÃ½"** Ä‘á»ƒ xem chi tiáº¿t
5. Kiá»ƒm tra Ä‘á»™i hÃ¬nh 2 Ä‘á»™i (tab **"Äá»™i hÃ¬nh"**)

#### **Trong Tráº­n Äáº¥u**
1. VÃ o tab **"Äiá»u khiá»ƒn"**
2. Báº¯t Ä‘áº§u theo dÃµi thá»i gian (tá»± Ä‘á»™ng)
3. Ghi nháº­n sá»± kiá»‡n khi xáº£y ra:
   - Click nÃºt tÆ°Æ¡ng á»©ng (Goal, Yellow, Red, Sub)
   - Chá»n cáº§u thá»§ tá»« dropdown
   - XÃ¡c nháº­n

#### **Sau Tráº­n Äáº¥u**
1. VÃ o tab **"BÃ¡o cÃ¡o"**
2. Äiá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin:
   - Thá»i tiáº¿t
   - Sá»‘ khÃ¡n giáº£
   - Ghi chÃº
   - Sá»± cá»‘ (náº¿u cÃ³)
3. Click **"Ná»™p BÃ¡o CÃ¡o"**
4. Kiá»ƒm tra trong **"BÃ¡o CÃ¡o"** menu

## ğŸ¨ Giao Diá»‡n

### MÃ u Sáº¯c Chá»§ Äáº¡o
- **VÃ ng (#fbbf24)**: MÃ u chá»§ Ä‘áº¡o - tÆ°á»£ng trÆ°ng cho tháº» vÃ ng vÃ  quyá»n lá»±c trá»ng tÃ i
- **Slate/Gray**: Ná»n vÃ  text chÃ­nh
- **Blue**: Team Home
- **Red**: Team Away

### Layout
- **Header**: Logo Whistle + TÃªn referee + Logout
- **Navigation**: Sticky top vá»›i 2 menu chÃ­nh
- **Content Area**: Responsive, tá»‘i Æ°u cho tablet vÃ  desktop

## ğŸ” PhÃ¢n Quyá»n

### Referee cÃ³ quyá»n:
- âœ… Xem lá»‹ch tráº­n Ä‘áº¥u Ä‘Æ°á»£c phÃ¢n cÃ´ng
- âœ… Xem Ä‘á»™i hÃ¬nh 2 Ä‘á»™i
- âœ… Ghi nháº­n sá»± kiá»‡n tráº­n Ä‘áº¥u (Goal, Card, Sub)
- âœ… XÃ³a sá»± kiá»‡n náº¿u nháº§m láº«n
- âœ… Äiá»u chá»‰nh thá»i gian tráº­n Ä‘áº¥u
- âœ… Ná»™p bÃ¡o cÃ¡o sau tráº­n
- âœ… Xem lá»‹ch sá»­ bÃ¡o cÃ¡o cá»§a mÃ¬nh

### Referee KHÃ”NG cÃ³ quyá»n:
- âŒ PhÃ¢n cÃ´ng trá»ng tÃ i cho tráº­n khÃ¡c
- âŒ Sá»­a Ä‘á»™i hÃ¬nh cáº§u thá»§
- âŒ Truy cáº­p khu vá»±c admin
- âŒ Quáº£n lÃ½ user, team, season

## ğŸ“± Responsive Design

### Desktop (â‰¥1024px)
- Layout 3 cá»™t cho match control
- Grid 2 cá»™t cho lineups
- Full features

### Tablet (768-1023px)
- Layout 2 cá»™t
- Condensed navigation
- Touch-optimized buttons

### Mobile (< 768px)
- Single column
- Stacked layout
- Simplified controls
- Large touch targets

## ğŸ› ï¸ Technical Stack

### Frontend
- **React 18**: UI framework
- **React Router v6**: Routing
- **Tailwind CSS**: Styling
- **Lucide React**: Icons
- **React Hot Toast**: Notifications

### Integration
- **API Service**: Centralized API calls
- **Auth Context**: User authentication
- **Protected Routes**: Role-based access

## ğŸ“‚ Cáº¥u TrÃºc Files

```
src/apps/referee/
â”œâ”€â”€ RefereeApp.jsx                 # Main app entry
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ RefereeLayout.jsx          # Layout vá»›i header, nav, footer
â”‚   â””â”€â”€ LineupDisplay.jsx          # Copy from admin (reused)
â””â”€â”€ pages/
    â”œâ”€â”€ MyMatchesPage.jsx          # Danh sÃ¡ch tráº­n Ä‘áº¥u
    â”œâ”€â”€ MatchControlPage.jsx       # Äiá»u khiá»ƒn tráº­n Ä‘áº¥u
    â””â”€â”€ ReportsPage.jsx            # Lá»‹ch sá»­ bÃ¡o cÃ¡o
```

## ğŸ”„ API Endpoints Sá»­ Dá»¥ng

### Match Officials
- `GET /match-officials/my-assignments` - Láº¥y tráº­n Ä‘Æ°á»£c phÃ¢n cÃ´ng
- `GET /match-officials/my-reports` - Lá»‹ch sá»­ bÃ¡o cÃ¡o

### Matches
- `GET /matches/:id` - Chi tiáº¿t tráº­n Ä‘áº¥u
- `GET /matches/:id/events` - Danh sÃ¡ch sá»± kiá»‡n
- `POST /matches/:id/events` - Táº¡o sá»± kiá»‡n má»›i
- `DELETE /match-events/:id` - XÃ³a sá»± kiá»‡n
- `GET /matches/:id/lineups` - Äá»™i hÃ¬nh 2 Ä‘á»™i

### Reports
- `POST /matches/:id/referee-report` - Ná»™p bÃ¡o cÃ¡o
- `POST /matches/:id/mark-referee-report` - ÄÃ¡nh dáº¥u Ä‘Ã£ ná»™p

## ğŸ¯ Best Practices

### Cho Trá»ng TÃ i
1. **Kiá»ƒm tra lá»‹ch trÆ°á»›c 24h**: XÃ¡c nháº­n tráº­n Ä‘Æ°á»£c phÃ¢n cÃ´ng
2. **Xem Ä‘á»™i hÃ¬nh trÆ°á»›c 2h**: Náº¯m rÃµ cáº§u thá»§ cá»§a 2 Ä‘á»™i
3. **Ghi nháº­n ngay láº­p tá»©c**: KhÃ´ng trÃ¬ hoÃ£n viá»‡c ghi sá»± kiá»‡n
4. **Kiá»ƒm tra láº¡i**: Xem timeline trÆ°á»›c khi káº¿t thÃºc
5. **Ná»™p bÃ¡o cÃ¡o trong 2h**: Sau khi tráº­n Ä‘áº¥u káº¿t thÃºc

### Cho Developers
1. Sá»­ dá»¥ng `useAuth()` Ä‘á»ƒ láº¥y thÃ´ng tin user
2. Check role trÆ°á»›c khi render sensitive data
3. Handle loading states properly
4. Toast notifications cho user feedback
5. Error boundaries cho crash protection

## ğŸ› Troubleshooting

### KhÃ´ng tháº¥y tráº­n Ä‘áº¥u nÃ o?
- Kiá»ƒm tra user cÃ³ role `REFEREE`
- Kiá»ƒm tra Ä‘Ã£ Ä‘Æ°á»£c admin phÃ¢n cÃ´ng chÆ°a
- Xem trong database `match_officials` table

### KhÃ´ng ghi Ä‘Æ°á»£c sá»± kiá»‡n?
- Kiá»ƒm tra match status (pháº£i lÃ  IN_PROGRESS)
- Kiá»ƒm tra cáº§u thá»§ cÃ³ trong lineup khÃ´ng
- Kiá»ƒm tra API response trong console

### BÃ¡o cÃ¡o khÃ´ng ná»™p Ä‘Æ°á»£c?
- Äiá»n Ä‘áº§y Ä‘á»§ required fields
- Kiá»ƒm tra match Ä‘Ã£ káº¿t thÃºc chÆ°a
- Xem network tab Ä‘á»ƒ debug

## ğŸš€ Future Enhancements

### V2 Features
- [ ] Live chat vá»›i supervisor
- [ ] VAR (Video Assistant Referee) support
- [ ] Offline mode vá»›i sync
- [ ] Multi-language support
- [ ] Push notifications
- [ ] Photo/Video upload
- [ ] Injury time management
- [ ] Player statistics summary

## ğŸ“ LiÃªn Há»‡ & Há»— Trá»£

Náº¿u cÃ³ váº¥n Ä‘á» ká»¹ thuáº­t hoáº·c cáº§n há»— trá»£:
- Email: support@championleague.vn
- Hotline: 1900-xxxx
- Admin Portal: Táº¡o ticket há»— trá»£

---

**Referee Portal** - Professional Match Official Management System
Â© 2025 Champion League Management
