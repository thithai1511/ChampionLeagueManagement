# HÆ°á»›ng Dáº«n Xem Äá»™i HÃ¬nh Ra SÃ¢n & Chi Tiáº¿t Tráº­n Äáº¥u

## ğŸ“‹ Tá»•ng Quan

KhÃ¡n giáº£ giá» Ä‘Ã¢y cÃ³ thá»ƒ xem Ä‘áº§y Ä‘á»§ thÃ´ng tin chi tiáº¿t tráº­n Ä‘áº¥u vá»›i giao diá»‡n Ä‘áº¹p vÃ  chuyÃªn nghiá»‡p:
- âš½ **Káº¿t quáº£ & Tá»· sá»‘**
- ğŸ‘¥ **Äá»™i hÃ¬nh ra sÃ¢n chuyÃªn nghiá»‡p** (sÃ¢n bÃ³ng xanh, vá»‹ trÃ­ chÃ­nh xÃ¡c theo formation)
- ğŸ”„ **Thay ngÆ°á»i** 
- ğŸ“Š **Diá»…n biáº¿n tráº­n Ä‘áº¥u** (ghi bÃ n, tháº» pháº¡t, sá»± kiá»‡n)
- ğŸ“ˆ **Thá»‘ng kÃª tráº­n Ä‘áº¥u**

## âœ¨ TÃ­nh NÄƒng Má»›i - Äá»™i HÃ¬nh ChuyÃªn Nghiá»‡p

### ğŸ¨ Giao Diá»‡n SÃ¢n BÃ³ng Äáº¹p Máº¯t
- **SÃ¢n bÃ³ng gradient xanh** vá»›i hiá»‡u á»©ng cá» tá»± nhiÃªn
- **Váº¡ch sÃ¢n chuyÃªn nghiá»‡p**: vÃ²ng trÃ²n giá»¯a sÃ¢n, váº¡ch trung tÃ¢m, vÃ¹ng cáº¥m Ä‘á»‹a
- **Viá»n bo trÃ²n mÆ°á»£t mÃ ** vá»›i shadow depth
- **Responsive design**: tá»± Ä‘á»™ng thu gá»n Ä‘áº¹p trÃªn mobile

### ğŸ‘¤ Player Badge ChuyÃªn Nghiá»‡p
Má»—i cáº§u thá»§ hiá»ƒn thá»‹ vá»›i badge Ä‘áº§y Ä‘á»§ thÃ´ng tin:

#### ğŸ”µ Ão sá»‘ mÃ u Ä‘á»™i
- MÃ u tÃ¹y chá»‰nh theo Ä‘á»™i (Home: xanh dÆ°Æ¡ng, Away: Ä‘á»)
- Sá»‘ Ã¡o lá»›n, rÃµ rÃ ng vá»›i viá»n tráº¯ng ná»•i báº­t
- Hiá»‡u á»©ng glow khi hover

#### ğŸ“› ThÃ´ng tin cáº§u thá»§
- TÃªn cáº§u thá»§ (rÃµ rÃ ng, khÃ´ng bá»‹ chá»“ng chÃ©o)
- Vá»‹ trÃ­ (GK, DF, MF, FW)
- Badge bo trÃ²n vá»›i viá»n mÃ u Ä‘á»™i

#### ğŸ… Biá»ƒu tÆ°á»£ng tráº¡ng thÃ¡i
- **C** (Captain): Badge vÃ ng kim cho Ä‘á»™i trÆ°á»Ÿng
- **âš½** Biá»ƒu tÆ°á»£ng bÃ³ng náº¿u ghi bÃ n (animate bounce)
- **ğŸŸ¨** Tháº» vÃ ng
- **ğŸŸ¥** Tháº» Ä‘á»  
- **âš ï¸** Cháº¥n thÆ°Æ¡ng/cáº£nh bÃ¡o

### ğŸ“ Formation System (SÆ¡ Ä‘á»“ chiáº¿n thuáº­t)

Há»— trá»£ cÃ¡c formation phá»• biáº¿n vá»›i vá»‹ trÃ­ chÃ­nh xÃ¡c:

#### âœ… Formations Ä‘Æ°á»£c há»— trá»£:
- **4-4-2**: Cá»• Ä‘iá»ƒn, cÃ¢n báº±ng
- **4-3-3**: Táº¥n cÃ´ng, pressing cao
- **4-2-3-1**: Linh hoáº¡t, hiá»‡n Ä‘áº¡i
- **3-5-2**: Wingback, kiá»ƒm soÃ¡t giá»¯a sÃ¢n
- **3-4-3**: Táº¥n cÃ´ng toÃ n diá»‡n
- **5-3-2**: PhÃ²ng ngá»± cháº¯c cháº¯n
- **4-5-1**: PhÃ²ng thá»§ pháº£n cÃ´ng

#### ğŸ“ Vá»‹ trÃ­ tá»± Ä‘á»™ng
- Goalkeeper (8% tá»« dÆ°á»›i)
- HÃ ng thá»§ (25% tá»« dÆ°á»›i)
- Tiá»n vá»‡ phÃ²ng ngá»± (42%)
- Tiá»n vá»‡ táº¥n cÃ´ng (60%)
- Tiá»n Ä‘áº¡o (75-80%)

### ğŸ¯ Responsive Design

#### ğŸ’» Desktop
- SÃ¢n bÃ³ng full size vá»›i aspect ratio 5:7
- Player badges kÃ­ch thÆ°á»›c lá»›n (56x56px)
- Font size rÃµ rÃ ng
- Grid 4 cá»™t cho dá»± bá»‹

#### ğŸ“± Mobile
- SÃ¢n bÃ³ng tá»± Ä‘á»™ng scale
- Player badges nhá» hÆ¡n (48x48px)
- Font size Ä‘iá»u chá»‰nh
- Grid 2 cá»™t cho dá»± bá»‹
- Touch-friendly sizing

## ğŸ¯ CÃ¡ch Sá»­ Dá»¥ng

### 1. Xem Danh SÃ¡ch Tráº­n Äáº¥u

Truy cáº­p má»™t trong cÃ¡c trang sau:

#### Trang Matches (Danh sÃ¡ch tráº­n Ä‘áº¥u)
```
http://localhost:3000/matches
```
- Xem táº¥t cáº£ tráº­n Ä‘áº¥u theo vÃ²ng Ä‘áº¥u
- Lá»c theo tráº¡ng thÃ¡i: Trá»±c tiáº¿p, Sáº¯p diá»…n ra, ÄÃ£ káº¿t thÃºc
- Má»—i tráº­n cÃ³ nÃºt **"Xem chi tiáº¿t"**

#### Trang Match Center (Trung tÃ¢m tráº­n Ä‘áº¥u)
```
http://localhost:3000/match-center
```
- Giao diá»‡n Ä‘áº¹p hÆ¡n vá»›i banner Champions League
- Lá»c theo mÃ¹a giáº£i, tráº¡ng thÃ¡i
- Click vÃ o báº¥t ká»³ tráº­n Ä‘áº¥u nÃ o Ä‘á»ƒ xem chi tiáº¿t

### 2. Xem Chi Tiáº¿t Tráº­n Äáº¥u

Khi click vÃ o má»™t tráº­n Ä‘áº¥u, báº¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n:
```
http://localhost:3000/matches/:matchId
```
VÃ­ dá»¥: `http://localhost:3000/matches/7747`

### 3. CÃ¡c Tab ThÃ´ng Tin

Trang chi tiáº¿t tráº­n Ä‘áº¥u cÃ³ 4 tab chÃ­nh:

#### ğŸ“Š **Tab Tá»•ng Quan**
- Thá»‘ng kÃª nhanh: Tá»•ng bÃ n tháº¯ng, sá»± kiá»‡n, cáº§u thá»§
- Diá»…n biáº¿n gáº§n Ä‘Ã¢y (5 sá»± kiá»‡n má»›i nháº¥t)
- Tráº¡ng thÃ¡i tráº­n Ä‘áº¥u (Trá»±c tiáº¿p, Sáº¯p diá»…n ra, ÄÃ£ káº¿t thÃºc)

#### ğŸ‘¥ **Tab Äá»™i HÃ¬nh**
**Hiá»ƒn thá»‹ Ä‘á»™i hÃ¬nh cá»§a 2 Ä‘á»™i song song:**

âœ… **Äá»™i hÃ¬nh chÃ­nh thá»©c (Starting XI)**
- Hiá»ƒn thá»‹ trÃªn sÃ¢n cá» vá»›i formation (vÃ­ dá»¥: 4-4-2, 4-3-3)
- Hiá»ƒn thá»‹ sá»‘ Ã¡o, tÃªn cáº§u thá»§, vá»‹ trÃ­
- ÄÃ¡nh dáº¥u Ä‘á»™i trÆ°á»Ÿng (â­ biá»ƒu tÆ°á»£ng vÆ°Æ¡ng miá»‡n)

âœ… **Cáº§u thá»§ dá»± bá»‹ (Substitutes)**
- Danh sÃ¡ch cáº§u thá»§ trÃªn gháº¿ dá»± bá»‹
- Sá»‘ Ã¡o, tÃªn, vá»‹ trÃ­

âœ… **Thay ngÆ°á»i Ä‘Ã£ thá»±c hiá»‡n**
- â†“ Cáº§u thá»§ ra sÃ¢n (sá»‘ phÃºt thi Ä‘áº¥u)
- â†‘ Cáº§u thá»§ vÃ o sÃ¢n thay tháº¿

#### âš¡ **Tab Diá»…n Biáº¿n**
**Timeline Ä‘áº§y Ä‘á»§ cÃ¡c sá»± kiá»‡n:**
- âš½ BÃ n tháº¯ng
- âš½ (OG) Pháº£n lÆ°á»›i nhÃ 
- ğŸŸ¨ Tháº» vÃ ng
- ğŸŸ¥ Tháº» Ä‘á»
- ğŸ”„ Thay ngÆ°á»i
- PhÃºt xáº£y ra sá»± kiá»‡n
- TÃªn cáº§u thá»§ liÃªn quan

#### ğŸ“ˆ **Tab Thá»‘ng KÃª**
- Thá»‘ng kÃª chi tiáº¿t (sáº½ Ä‘Æ°á»£c cáº­p nháº­t sau tráº­n)

## ğŸ”§ Cáº¥u TrÃºc Ká»¹ Thuáº­t

### Files ÄÃ£ Táº¡o

#### 1. **LineupDisplay.jsx** - Component hiá»ƒn thá»‹ Ä‘á»™i hÃ¬nh
```
src/apps/public/components/LineupDisplay.jsx
```
**Chá»©c nÄƒng:**
- Hiá»ƒn thá»‹ Ä‘á»™i hÃ¬nh trÃªn sÃ¢n cá» (football field view)
- Map formation (4-4-2, 4-3-3, etc.) vÃ o vá»‹ trÃ­ cáº§u thá»§
- Hiá»ƒn thá»‹ sá»‘ Ã¡o, tÃªn, vá»‹ trÃ­, Ä‘á»™i trÆ°á»Ÿng
- Danh sÃ¡ch cáº§u thá»§ dá»± bá»‹
- Lá»‹ch sá»­ thay ngÆ°á»i

**Props:**
```javascript
<LineupDisplay 
  lineup={[...]}        // Array of players
  teamName="Team A"     // TÃªn Ä‘á»™i
  formation="4-4-2"     // SÆ¡ Ä‘á»“ chiáº¿n thuáº­t
/>
```

#### 2. **MatchDetailPage.jsx** - Trang chi tiáº¿t tráº­n Ä‘áº¥u
```
src/apps/public/pages/MatchDetailPage.jsx
```
**Chá»©c nÄƒng:**
- Load dá»¯ liá»‡u tá»« 3 API endpoints:
  - `/api/matches/:matchId` - ThÃ´ng tin tráº­n Ä‘áº¥u
  - `/api/matches/:matchId/events` - Diá»…n biáº¿n
  - `/api/matches/:matchId/lineups` - Äá»™i hÃ¬nh
- 4 tabs: Overview, Lineups, Events, Stats
- Responsive design, Ä‘áº¹p trÃªn mobile & desktop
- Real-time status (Live, Finished, Scheduled)

### Routes ÄÃ£ Cáº­p Nháº­t

**File:** `src/apps/public/PublicApp.jsx`

```javascript
// Route má»›i Ä‘Æ°á»£c thÃªm:
<Route path="matches/:matchId" element={<MatchDetailPage />} />
```

**CÃ¡c Ä‘Æ°á»ng dáº«n hoáº¡t Ä‘á»™ng:**
- `/matches` - Danh sÃ¡ch tráº­n Ä‘áº¥u
- `/matches/7747` - Chi tiáº¿t tráº­n #7747
- `/match-center` - Trung tÃ¢m tráº­n Ä‘áº¥u (cÅ©ng link Ä‘áº¿n detail)

### Components ÄÃ£ Cáº­p Nháº­t

#### **MatchCard.jsx**
```javascript
// ThÃªm nÃºt "Xem chi tiáº¿t"
<button onClick={handleViewDetails}>
  Xem chi tiáº¿t
</button>
```

#### **MatchCenterPage.jsx**
```javascript
// Click vÃ o card sáº½ navigate Ä‘áº¿n detail
onClick={() => navigate(`/matches/${match.id}`)}
```

## ğŸ“¡ API Endpoints Sá»­ Dá»¥ng

### 1. Láº¥y thÃ´ng tin tráº­n Ä‘áº¥u
```http
GET /api/matches/:matchId
```
**Response:**
```json
{
  "match_id": 7747,
  "home_team_name": "Arsenal",
  "away_team_name": "Chelsea",
  "home_score": 2,
  "away_score": 1,
  "status": "FINISHED",
  "scheduled_kickoff": "2025-12-30T19:00:00Z",
  "stadium_name": "Emirates Stadium"
}
```

### 2. Láº¥y Ä‘á»™i hÃ¬nh
```http
GET /api/matches/:matchId/lineups
```
**Response:**
```json
{
  "data": [
    {
      "playerId": 123,
      "playerName": "Bukayo Saka",
      "jerseyNumber": 7,
      "position": "RW",
      "isStarting": true,
      "isCaptain": false,
      "seasonTeamId": 456,
      "status": "active"
    },
    {
      "playerId": 124,
      "playerName": "Martin Ã˜degaard",
      "jerseyNumber": 8,
      "position": "CAM",
      "isStarting": true,
      "isCaptain": true,
      "seasonTeamId": 456,
      "status": "active"
    }
  ]
}
```

### 3. Láº¥y diá»…n biáº¿n tráº­n Ä‘áº¥u
```http
GET /api/matches/:matchId/events
```
**Response:**
```json
{
  "data": [
    {
      "eventId": 1,
      "type": "GOAL",
      "minute": 23,
      "playerId": 123,
      "playerName": "Bukayo Saka",
      "teamId": 456,
      "description": "Penalty goal"
    },
    {
      "eventId": 2,
      "type": "SUBSTITUTION",
      "minute": 67,
      "playerId": 125,
      "playerName": "Gabriel Jesus",
      "assistPlayerId": 123,
      "teamId": 456
    }
  ]
}
```

## ğŸ¨ TÃ­nh NÄƒng UI/UX

### Responsive Design
- âœ… Desktop: Grid 2 cá»™t cho Ä‘á»™i hÃ¬nh
- âœ… Tablet: Single column
- âœ… Mobile: Optimized cho mÃ n hÃ¬nh nhá»

### Visual Effects
- âœ… SÃ¢n cá» vá»›i váº¡ch káº» sÃ¢n
- âœ… Badge Ä‘á»™i trÆ°á»Ÿng (ğŸ‘‘)
- âœ… Live indicator (ğŸ”´ cháº¥m Ä‘á» nháº¥p nhÃ¡y)
- âœ… Status badges vá»›i mÃ u sáº¯c (Live: Äá», Finished: XÃ¡m, Upcoming: Xanh)
- âœ… Timeline vá»›i Ä‘Æ°á»ng tháº³ng dá»c
- âœ… Icons cho sá»± kiá»‡n (âš½ğŸŸ¨ğŸŸ¥ğŸ”„)

### Tráº¡ng ThÃ¡i Tráº­n Äáº¥u
- **ğŸ”´ LIVE** - Tráº­n Ä‘ang diá»…n ra (IN_PLAY, HALFTIME, PAUSED)
- **âœ… FINISHED** - Tráº­n Ä‘Ã£ káº¿t thÃºc
- **ğŸ“… SCHEDULED** - Tráº­n sáº¯p diá»…n ra

## ğŸ§ª Testing

### Test Flow 1: Xem tráº­n Ä‘ang diá»…n ra
1. Truy cáº­p `http://localhost:3000/matches`
2. TÃ¬m tráº­n cÃ³ badge "ğŸ”´ Trá»±c tiáº¿p"
3. Click "Xem chi tiáº¿t"
4. Kiá»ƒm tra:
   - Tá»· sá»‘ hiá»ƒn thá»‹
   - Tab "Äá»™i hÃ¬nh" cÃ³ 2 Ä‘á»™i
   - Tab "Diá»…n biáº¿n" cÃ³ events

### Test Flow 2: Xem tráº­n Ä‘Ã£ káº¿t thÃºc
1. Truy cáº­p `http://localhost:3000/match-center`
2. Filter "ÄÃ£ káº¿t thÃºc"
3. Click vÃ o báº¥t ká»³ tráº­n nÃ o
4. Kiá»ƒm tra:
   - Tá»· sá»‘ cuá»‘i cÃ¹ng
   - Äá»™i hÃ¬nh Ä‘áº§y Ä‘á»§ cá»§a 2 Ä‘á»™i
   - Timeline diá»…n biáº¿n Ä‘áº§y Ä‘á»§
   - ThÃ´ng tin thay ngÆ°á»i

### Test Flow 3: Xem tráº­n sáº¯p diá»…n ra
1. Filter "Sáº¯p diá»…n ra"
2. Click vÃ o tráº­n
3. Kiá»ƒm tra:
   - Hiá»ƒn thá»‹ giá» bÃ³ng lÄƒn
   - Äá»™i hÃ¬nh cÃ³ thá»ƒ chÆ°a cÃ³ (náº¿u chÆ°a ná»™p)
   - Message "ChÆ°a cÃ³ Ä‘á»™i hÃ¬nh"

## ğŸš€ Deployment Notes

### Äiá»u kiá»‡n Ä‘á»ƒ hiá»ƒn thá»‹ Ä‘á»™i hÃ¬nh:
1. âœ… Äá»™i hÃ¬nh pháº£i Ä‘Æ°á»£c ná»™p bá»Ÿi Ä‘á»™i (`/api/matches/:matchId/lineups`)
2. âœ… Äá»™i hÃ¬nh pháº£i Ä‘Æ°á»£c BTC duyá»‡t (status = 'APPROVED')
3. âœ… CÃ³ Ã­t nháº¥t 11 cáº§u thá»§ chÃ­nh

### Backend Dependencies
- âœ… `matchLineupService.ts` - Service láº¥y Ä‘á»™i hÃ¬nh
- âœ… `matchEventService.ts` - Service láº¥y events
- âœ… `matchDetailRoutes.ts` - API routes
- âœ… Báº£ng `match_lineups` trong database

## ğŸ“ Notes

### Dá»¯ Liá»‡u Cáº§n CÃ³
- Äá»™i hÃ¬nh pháº£i Ä‘Æ°á»£c ná»™p trÆ°á»›c qua trang Team Portal
- BTC pháº£i duyá»‡t Ä‘á»™i hÃ¬nh (APPROVED status)
- Match events Ä‘Æ°á»£c ghi nháº­n qua Live Match Update page (Admin)

### Giá»›i Háº¡n
- Formation hiá»ƒn thá»‹ Ä‘Æ¡n giáº£n (khÃ´ng phá»©c táº¡p nhÆ° tactical view)
- Thá»‘ng kÃª chi tiáº¿t chÆ°a Ä‘Æ°á»£c implement (tab Stats Ä‘á»ƒ trá»‘ng)
- Player photos chÆ°a Ä‘Æ°á»£c hiá»ƒn thá»‹ (chá»‰ cÃ³ sá»‘ Ã¡o)

### Future Enhancements
- [ ] ThÃªm player photos/avatars
- [ ] Formation editor interactive
- [ ] Real-time updates qua WebSocket
- [ ] Match statistics (shots, possession, passes)
- [ ] Video highlights integration
- [ ] Download match report PDF

## âœ… Summary

**ÄÃ£ hoÃ n thÃ nh:**
1. âœ… Component `LineupDisplay` Ä‘á»ƒ hiá»ƒn thá»‹ Ä‘á»™i hÃ¬nh sÃ¢n cá»
2. âœ… Page `MatchDetailPage` vá»›i 4 tabs Ä‘áº§y Ä‘á»§
3. âœ… Route `/matches/:matchId` 
4. âœ… Link tá»« MatchCard & MatchCenterPage
5. âœ… API integration (lineups, events, match details)
6. âœ… Responsive design
7. âœ… Real-time status indicators

**CÃ¡ch truy cáº­p:**
- Danh sÃ¡ch: `http://localhost:3000/matches`
- Chi tiáº¿t: `http://localhost:3000/matches/7747`
- Match Center: `http://localhost:3000/match-center`

---

**ğŸ“Œ LÆ°u Ã½:** Äáº£m báº£o backend server Ä‘ang cháº¡y vÃ  database cÃ³ dá»¯ liá»‡u Ä‘á»™i hÃ¬nh Ä‘Ã£ Ä‘Æ°á»£c ná»™p & duyá»‡t.
